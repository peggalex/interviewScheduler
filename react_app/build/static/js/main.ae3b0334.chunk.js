(this.webpackJsonpinterview_scheduler=this.webpackJsonpinterview_scheduler||[]).push([[0],{18:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var a,c=n(1),r=n.n(c),s=n(13),i=n.n(s),o=(n(18),n(9)),l=n(3),d=n.n(l),u=n(5),h=n(4),j=n(2),p=n(0),f=Object(p.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"chevron-left",className:"chevron svg-inline--fa fa-chevron-left fa-w-10",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"-96 0 512 512",children:Object(p.jsx)("path",{fill:"currentColor",d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"})}),m={ChevronDown:Object(p.jsx)("div",{className:"centerAll",style:{transform:"rotate(-90deg)"},children:f}),ChevronUp:Object(p.jsx)("div",{className:"centerAll",style:{transform:"rotate(90deg)"},children:f}),Calendar:Object(p.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-calendar",children:[Object(p.jsx)("rect",{x:3,y:4,width:18,height:18,rx:2,ry:2}),Object(p.jsx)("line",{x1:16,y1:2,x2:16,y2:6}),Object(p.jsx)("line",{x1:8,y1:2,x2:8,y2:6}),Object(p.jsx)("line",{x1:3,y1:10,x2:21,y2:10})]}),Upload:Object(p.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-upload",children:[Object(p.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),Object(p.jsxs)("g",{className:"uploadArrow",children:[Object(p.jsx)("polyline",{points:"17 8 12 3 7 8"}),Object(p.jsx)("line",{x1:12,y1:3,x2:12,y2:15})]})]}),CheckMark:Object(p.jsxs)("svg",{style:{color:"var(--green)"},xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-check-square",children:[Object(p.jsx)("polyline",{points:"9 11 12 14 22 4"}),Object(p.jsx)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),PlusSign:Object(p.jsxs)("svg",{style:{color:"var(--blue)"},xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-plus-square",children:[Object(p.jsx)("rect",{x:3,y:3,width:18,height:18,rx:2,ry:2}),Object(p.jsx)("line",{x1:12,y1:8,x2:12,y2:16}),Object(p.jsx)("line",{x1:8,y1:12,x2:16,y2:12})]}),CrossSign:Object(p.jsxs)("svg",{style:{color:"var(--red)"},xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-x-square",children:[Object(p.jsx)("rect",{x:3,y:3,width:18,height:18,rx:2,ry:2}),Object(p.jsx)("line",{x1:9,y1:9,x2:15,y2:15}),Object(p.jsx)("line",{x1:15,y1:9,x2:9,y2:15})]}),Generate:Object(p.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-refresh-cw",children:[Object(p.jsx)("polyline",{points:"23 4 23 10 17 10"}),Object(p.jsx)("polyline",{points:"1 20 1 14 7 14"}),Object(p.jsx)("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]}),Coffee:Object(p.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-coffee",children:[Object(p.jsx)("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),Object(p.jsx)("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),Object(p.jsx)("line",{x1:6,y1:1,x2:6,y2:4}),Object(p.jsx)("line",{x1:10,y1:1,x2:10,y2:4}),Object(p.jsx)("line",{x1:14,y1:1,x2:14,y2:4})]}),Edit:Object(p.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-edit",children:[Object(p.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),Object(p.jsx)("path",{className:"editPen",d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})},b=(n(21),n(8)),v=n(10);function x(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(c,r){return O(e,t,n,a).then(function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.t0=r,e.next=4,t.json();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=13;break;case 8:return e.t2=c,e.next=11,t.json();case 11:e.t3=e.sent,(0,e.t2)(e.t3);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=e.replace(/[ \t\n]/g,"");var r="".concat("./","/").concat(e);return fetch(r,{method:a[t],body:n,headers:c})}!function(e){e[e.POST=0]="POST",e[e.GET=1]="GET",e[e.PUT=2]="PUT"}(a||(a={}));var g=function(){var e=Object(u.a)(d.a.mark((function e(t,n,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x(t,n,JSON.stringify(a),{Accept:"application/json","Content-Type":"application/json"}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();function y(e,t,n){var a=document.createElement("a");a.href="data:".concat(e,",").concat(encodeURIComponent(t)),a.download=n,a.click()}var C;function w(e){switch(e){case C.STRING:return"string";case C.INT:return"integer";case C.DATETIME:return"datetime";default:throw Error("unhandled col type for ColumnTypeToStr(): ".concat(C))}}!function(e){e[e.STRING=0]="STRING",e[e.INT=1]="INT",e[e.DATETIME=2]="DATETIME"}(C||(C={}));var N=[],T=function(){function e(t,n,a,c,r,s){Object(b.a)(this,e),this.name=void 0,this.endpoint=void 0,this.desc=void 0,this.columns=void 0,this.mandatory=void 0,this.dependencies=void 0,N.push(this),this.name=t,this.endpoint=n,this.desc=a,this.mandatory=r,this.dependencies=null!==s&&void 0!==s?s:[],this.columns=[];var i,o=Object(h.a)(c);try{for(o.s();!(i=o.n()).done;){var l=i.value;this.addColumn(l)}}catch(d){o.e(d)}finally{o.f()}}return Object(v.a)(e,[{key:"addColumn",value:function(e){var t;return this.columns.push(e),e.table=null!==(t=e.table)&&void 0!==t?t:this,this}},{key:"getValues",value:function(e){return e[this.name]}},{key:"isDependenciesLoaded",value:function(e){return this.dependencies.every((function(t){return t.isLoaded(e)}))}},{key:"isLoaded",value:function(e){var t,n;return 0<(null!==(t=null===(n=e[this.name])||void 0===n?void 0:n.length)&&void 0!==t?t:-1)}}]),e}(),A=new T("Convention Times","ConventionTimes","This is a list of valid times for the convention.",[{name:"Start Time",type:C.DATETIME},{name:"End Time",type:C.DATETIME,desc:"must be greater than start time"}],!0),S={name:"Company Name",type:C.STRING},k={name:"Room Name",type:C.STRING},D=new T("Company Rooms","CompanyRooms","This is a list of companies participating, and their rooms.",[S,k],!0),E=new T("Room Interviews","RoomInterviews","This is a list of rooms with interviews.",[k,{name:"Length",type:C.INT,desc:"in minutes"},{name:"Start Time",type:C.DATETIME},{name:"End Time",type:C.DATETIME,desc:"must be greater than start time"}],!0,[A,D]),I=(new T("Room Breaks","RoomBreaks","This is a list of room breaks.",[k,{name:"Start Time",type:C.DATETIME},{name:"End Time",type:C.DATETIME,desc:"must be greater than start time"}],!1,[D]),{name:"Attendee ID",type:C.STRING}),L=new T("Attendees","AttendeeNames","This is a list of attendees (students attending ASNA).",[I,{name:"Attendee Name",type:C.STRING}],!0),M=(new T("Attendee Breaks","AttendeeBreaks","This is a list of attendee breaks.",[I,{name:"Start Time",type:C.DATETIME},{name:"End Time",type:C.DATETIME,desc:"must be greater than start time"}],!1,[A,L]),new T("Attendee Preferences","AttendeePrefs","This is a list of the preferences an attendee has for a company.",[I,S,{name:"Preference",type:C.INT,desc:"must be positive, the smaller the better"}],!0,[L,D]),new T("Interview Candidates","InterviewCandidates","This is a list of interview candidates.",[k,I],!0,[D,E,L]),new T("Coffee Chats","CoffeeChats","This is a list of room coffee chats.",[k,{name:"Capacity",type:C.INT,desc:"must be positive"},{name:"Start Time",type:C.DATETIME},{name:"End Time",type:C.DATETIME,desc:"must be greater than start time"}],!1,[A,D]));new T("Coffee Chat Candidates","CoffeeChatCandidates","This is a list of room coffee chats candidates, and the rank the company ascribes that candidate.",[k,I,{name:"Rank",type:C.INT,desc:"must be positive, the smaller the better"}],!1,[L,D,M]);function R(e,t){switch(t){case C.STRING:case C.INT:return e;case C.DATETIME:var n=new Date(Date.parse(e)),a=n.toLocaleString("default",{month:"short"}),c=n.getMinutes().toString().padStart(2,"0");return"".concat(a," ").concat(n.getDate(),", ").concat(n.getHours(),":").concat(c);default:throw Error("unhandled col type for FormatColumn(): ".concat(C))}}function P(e){var t=e.table,n=e.tableData,c=e.updateTableData,s=e.isLoading,i=e.setIsLoading,o=r.a.useRef(null),l=r.a.useState(""),h=Object(j.a)(l,2),f=h[0],b=h[1];function v(){return(v=Object(u.a)(d.a.mark((function e(){var r,s,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=o.current)){e.next=3;break}return e.abrupt("return");case 3:if(null!=(s=r.files)&&0!=s.length){e.next=9;break}return r.setCustomValidity("Please select file"),e.abrupt("return",r.reportValidity());case 9:r.setCustomValidity("");case 10:l=s[0],(u=new FormData).append("table",l),i(!0),x("/set".concat(t.endpoint),a.POST,u).then((function(e){e.data;alert("Uploaded table: ".concat(t.name)),c(n)})).catch((function(e){console.log("res",e),alert(e.error)})).finally((function(){i(!1)}));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.a.useEffect((function(){b("")}),[JSON.stringify(n)]);var O=t.isDependenciesLoaded(n);return s?Object(p.jsx)("div",{className:"loader"}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("label",{id:"htmlUploadContainer",children:[Object(p.jsx)("input",{onChange:function(){var e=o.current;if(null!=e){var t=e.files;null!=t&&0<t.length?(b(t[0].name),function(){v.apply(this,arguments)}()):b("")}},ref:o,name:"file",accept:".csv",type:"file",disabled:!O}),Object(p.jsxs)("div",{id:"htmlUpload",className:"col centerCross clickable whiteWhenHovered ".concat(O?"":"disabled"),children:[Object(p.jsxs)("div",{className:"row centerCross",children:[m.Upload,Object(p.jsx)("p",{children:"choose file"})]}),Object(p.jsx)("p",{children:"(.csv)"})]})]}),Object(p.jsx)("p",{children:Object(p.jsx)("i",{children:O?""==f?"No file selected":f:"dependencies not loaded"})})]})}function F(e){var t=e.table,n=e.col,a=[w(n.type)];return t!=n.table&&a.push("must be defined in the ".concat(n.table.name," table")),n.desc&&a.push(n.desc),Object(p.jsxs)("div",{className:"column",children:[Object(p.jsx)("b",{children:n.name})," \u2022 ",a.join(", ")]})}function B(e){var t=e.table,n=e.isSelected,a=e.scrollTo,c=e.tableData,s=e.updateTableData,i=r.a.useState(t.getValues(c)),o=Object(j.a)(i,2),l=o[0],d=o[1],u=r.a.useState(!1),h=Object(j.a)(u,2),f=h[0],b=h[1],v=function(e){return e.isDependenciesLoaded(c)},x=r.a.useState(v(t)),O=Object(j.a)(x,2),g=O[0],y=O[1],C=r.a.useRef(null);return r.a.useEffect((function(){var e;n&&(null===(e=C.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"}));y(!0),a(null)}),[n]),r.a.useEffect((function(){y(v(t))}),[v(t)]),r.a.useEffect((function(){d(t.getValues(c))}),[JSON.stringify(t.getValues(c))]),Object(p.jsxs)("div",{ref:C,className:"table",children:[Object(p.jsxs)("div",{className:"tableHeader row clickable",onClick:function(){return y(!g)},children:[Object(p.jsx)("div",{className:"tableChevronContainer",children:g?m.ChevronDown:m.ChevronUp}),Object(p.jsx)("h2",{className:"centerAll",children:t.name}),Object(p.jsx)("div",{className:"spacer"}),Object(p.jsx)("div",{className:"tableAvailability centerAll",children:t.isDependenciesLoaded(c)?t.isLoaded(c)?m.CheckMark:m.PlusSign:m.CrossSign})]}),g?Object(p.jsxs)("div",{className:"tableConfig col",children:[Object(p.jsx)("div",{className:"tableDesc",children:Object(p.jsx)("p",{children:t.desc})}),0==t.dependencies.length?null:Object(p.jsxs)("div",{className:"tableDependencies",children:[Object(p.jsx)("h3",{children:"Depends on:"}),Object(p.jsx)("ul",{children:t.dependencies.map((function(e,t){return Object(p.jsxs)("li",{className:"dependency row centerCross clickable",onClick:function(){return a(e)},children:[Object(p.jsxs)("p",{children:[e.name," table"]}),Object(p.jsx)("div",{className:"dependencyIcon row centerCross",children:e.isLoaded(c)?m.CheckMark:m.CrossSign})]},t)}))})]}),Object(p.jsxs)("div",{className:"tableColumns",children:[Object(p.jsx)("h3",{children:"Columns:"}),Object(p.jsx)("ul",{children:t.columns.map((function(e,n){return Object(p.jsx)("li",{children:Object(p.jsx)(F,{table:t,col:e})},n)}))})]}),Object(p.jsxs)("div",{className:"tableUpload col centerCross",children:[Object(p.jsx)(P,{table:t,tableData:c,updateTableData:s,isLoading:f,setIsLoading:b}),!f&&t.isLoaded(c)?Object(p.jsx)("div",{className:"tableTable",children:Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsx)("tr",{children:t.columns.map((function(e,t){return Object(p.jsx)("th",{children:e.name},t)}))})}),Object(p.jsx)("tbody",{children:l.map((function(e,n){return Object(p.jsxs)("tr",{children:[e.map((function(e,n){return Object(p.jsx)("td",{children:R(e,t.columns[n].type)},n)}))," "]},n)}))})]})}):null]})]}):null]})}var G=function(e){var t=e.tableData,n=e.updateTableData,a=r.a.useState(null),c=Object(j.a)(a,2),s=c[0],i=c[1];return Object(p.jsx)("div",{id:"configPage",children:N.map((function(e){return Object(p.jsx)(B,{table:e,isSelected:s==e,scrollTo:function(e){return i(e)},tableData:t,updateTableData:n},e.name)}))})},U=n(12),V=(n(22),function(){function e(t,n){Object(b.a)(this,e),this.start=void 0,this.end=void 0,this.lengthMins=void 0,this.start=t,this.end=n,this.lengthMins=(+n-+t)/1e3/60}return Object(v.a)(e,null,[{key:"fromStr",value:function(t){return new e(new Date(t.start),new Date(t.end))}}]),e}()),J=function e(t,n,a,c){Object(b.a)(this,e),this.att=void 0,this.companyName=void 0,this.roomName=void 0,this.interval=void 0,this.isCoffeeChat=void 0,this.iApp=void 0,this.att=t,this.companyName=n,this.roomName=a,this.interval=V.fromStr(c),this.isCoffeeChat=c.isCoffeeChat,this.iApp=c};function H(e,t,n,a){var c,r=null===(c=e.companies[t][n].coffeeChat)||void 0===c?void 0:c.candidates;return r?r.indexOf(a)+1:null}function W(e,t){var n=new Date(e);return n.setHours(e.getHours()+t),n}function q(e){var t,n=e.conventionTimes.map((function(e){return V.fromStr(e)})),a=[],c=Object(h.a)(n);try{for(c.s();!(t=c.n()).done;)for(var r=t.value,s=r.start;s<r.end;s=W(s,1))a.push(s)}catch(i){c.e(i)}finally{c.f()}return a}var z=function(e){return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",hour12:!0}).format(e)};function _(e){var t=z(e),n=new Intl.DateTimeFormat("en-US",{month:"short"}).format(e),a=e.getDate();return"".concat(n," ").concat(a,", ").concat(t)}var K={},Q={},X={},Y={},Z={},$={app:null,room:null,att:null,time:null};function ee(e){var t=e.schedule,n=e.swapFunc,a=q(t);function c(e){console.log("draggin");var t=e.target,n=t.dataset.att,a=t.dataset.time,c=t.dataset.room,r=t.dataset.app;$.att=null!==n&&void 0!==n?n:"",$.time=null!==a&&void 0!==a?a:"",$.room=null!==c&&void 0!==c?c:"",$.app=null!==r&&void 0!==r?r:"",document.querySelectorAll("#scheduleCompany tbody tr:not([data-room='".concat(c,"'])")).forEach((function(e){e.classList.add("fadeRoom")}))}function r(e){console.log("droppin"),e.preventDefault();var t=e.currentTarget,a=t.dataset.att,c=t.dataset.time,r=t.dataset.room,s=t.dataset.app,i=$.att,o=$.time,l=$.room,d=$.app,u=r||l,h=[a,i].map((function(e){return e?parseInt(e):void 0})),p=Object(j.a)(h,2),f=p[0],m=p[1],b=[s,d].map((function(e){return e?JSON.parse(e):void 0})),v=Object(j.a)(b,2),x=v[0],O=v[1],g=function(e,t){return"".concat(e?"Attendee ".concat(e):"Appointment").concat(t?" @ ".concat(t):"")};window.confirm(f||x?"Are you sure you want to swap ".concat(g(m,o)," with ").concat(g(f,c)," for ").concat(u,"?"):"Are you sure you want to move ".concat(g(m,o)," out of the schedule (to the extra column) for ").concat(u,"?"))&&(console.log("hi"),n(!1,x,f,O,m))}function s(e){var t=e.target,n=t.dataset.att,a=t.dataset.time,c=t.dataset.room,r=t.dataset.app,s=$.att,i=$.time,o=$.room,l=$.app;(a||i)&&a!=i&&c==o&&(n||s)&&(r||l)&&e.preventDefault()}function i(e){document.querySelectorAll("#scheduleCompany tbody tr.fadeRoom").forEach((function(e){e.classList.remove("fadeRoom")}))}return K={},X={},Y={},Q={},Z={},Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"Interviews"}),Object(p.jsx)("div",{id:"scheduleCompany",className:"scheduleTableContainer",children:Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{id:"roomNameCol",children:"Room Name"}),a.map((function(e,t){return Object(p.jsx)("th",{children:_(e)},t)})),Object(p.jsx)("th",{id:"extra",children:"Extra"})]})}),Object(p.jsx)("tbody",{children:Object.entries(t.companies).map((function(e){var n=Object(j.a)(e,2),o=n[0],l=n[1];return Object.entries(l).map((function(e){var n=Object(j.a)(e,2),l=n[0],d=n[1],u={},f=!1,b=0;Q[l]=o;var v,x=new Set(d.candidates),O=Object(h.a)(d.candidates);try{for(O.s();!(v=O.n()).done;){var g=v.value;X[g]=X[g]||new Set,X[g].add(l)}}catch(D){O.e(D)}finally{O.f()}if(d.coffeeChat){var y,C=Object(h.a)(d.coffeeChat.candidates);try{for(C.s();!(y=C.n()).done;){var w=y.value;Y[w]=Y[w]||new Set,Y[w].add(l)}}catch(D){C.e(D)}finally{C.f()}}var N,T=Object(h.a)(d.apps);try{for(T.s();!(N=T.n()).done;){var A=N.value,S=new J(A.att,o,l,A);if(null!=S.att&&(S.isCoffeeChat||x.delete(S.att),K[S.att]=[].concat(Object(U.a)(K[S.att]||[]),[S])),S.isCoffeeChat){if(Z[l]=[].concat(Object(U.a)(Z[l]||[]),[S]),f)continue;f=!0}for(var k=S.interval;b<a.length&&W(a[b],1)<=k.start;b++);u[+a[b]]=u[+a[b]]||[],u[+a[b]].push(S)}}catch(D){T.e(D)}finally{T.f()}return Object(p.jsxs)("tr",{"data-room":l,children:[Object(p.jsx)("td",{children:l}),a.map((function(e){return Object(p.jsx)("td",{children:(u[+e]||[]).map((function(e){var n=e.interval,a=n.lengthMins/60*100,d=n.start.getMinutes()/60*100,u=null==e.att?null:t.attendees[e.att];return Object(p.jsx)("div",{className:"appContainer centerAll",style:{left:"".concat(d,"%"),width:"".concat(a,"%")},children:Object(p.jsxs)("div",{"data-att":e.isCoffeeChat?null:e.att,"data-time":z(n.start),"data-room":l,"data-app":e.isCoffeeChat?null:JSON.stringify(e.iApp),className:"app col centerAll ".concat(e.att?"":"empty"," ").concat(e.isCoffeeChat?"cc":""),draggable:null!=e.att&&!e.isCoffeeChat,onDragStart:e.isCoffeeChat?function(){}:c,onDragEnd:e.isCoffeeChat?function(){}:i,onDrop:e.isCoffeeChat?function(){}:r,onDragOver:e.isCoffeeChat?function(){}:s,children:[e.isCoffeeChat?Object(p.jsx)("div",{className:"ccIcon",children:m.Coffee}):null,Object(p.jsxs)("div",{className:"appLength",children:[n.lengthMins,"m"]}),Object(p.jsx)("span",{className:"appAtt",children:e.isCoffeeChat?"coffee chat":e.att||"?"}),Object(p.jsx)("span",{className:"appTime",children:z(n.start)}),Object(p.jsx)("span",{className:"appPref",children:null==u||e.isCoffeeChat?null:"pref: ".concat(null===u||void 0===u?void 0:u.prefs[o])})]})},l+n.toString())}))},+e)})),Object(p.jsx)("td",{children:Object(p.jsxs)("div",{className:"row centerCross",children:[Object(p.jsx)("div",{className:"appContainer notSelected centerAll",children:Object(p.jsx)("div",{className:"app removeApp col centerAll","data-room":l,onDrop:r,onDragOver:s,children:Object(p.jsx)("span",{className:"appAtt",children:"remove"})})}),Array.from(x).map((function(e){var n=t.attendees[e];return Object(p.jsx)("div",{className:"appContainer notSelected centerAll",children:Object(p.jsxs)("div",{className:"app col centerAll",draggable:!0,"data-att":e,"data-room":l,onDragStart:c,onDragEnd:i,onDrop:r,onDragOver:s,children:[Object(p.jsxs)("span",{className:"appPref",children:["pref: ",n.prefs[o]]}),Object(p.jsx)("span",{className:"appAtt",children:e})]})},e)}))]})})]})}))}))})]})})]})}function te(e){var t=e.schedule,n=e.swapFunc;function a(e){console.log("draggin");var t=e.target,n=t.dataset.att,a=t.dataset.time,c=t.dataset.room,r=t.dataset.app;$.att=null!==n&&void 0!==n?n:"",$.time=null!==a&&void 0!==a?a:"",$.room=null!==c&&void 0!==c?c:"",$.app=null!==r&&void 0!==r?r:"",document.querySelectorAll("#scheduleCoffeeChat tbody tr:not([data-room='".concat(c,"'])")).forEach((function(e){e.classList.add("fadeRoom")}))}function c(e){console.log("droppin"),e.preventDefault();var t=e.currentTarget,a=t.dataset.att,c=t.dataset.time,r=t.dataset.room,s=t.dataset.app,i=$.att,o=$.time,l=$.room,d=$.app,u=r||l,h=[a,i].map((function(e){return e?parseInt(e):void 0})),p=Object(j.a)(h,2),f=p[0],m=p[1],b=[s,d].map((function(e){return e?JSON.parse(e):void 0})),v=Object(j.a)(b,2),x=v[0],O=v[1],g=function(e,t){return"".concat(e?"Attendee ".concat(e):"Appointment").concat(t?" @ ".concat(t):"")};window.confirm(f||x?"Are you sure you want to swap ".concat(g(m,o)," with ").concat(g(f,c)," for ").concat(u,"?"):"Are you sure you want to move ".concat(g(m,o)," out of the schedule (to the extra column) for ").concat(u,"?"))&&(console.log("hi"),n(!0,x,f,O,m))}function r(e){var t=e.target,n=t.dataset.att,a=t.dataset.time,c=t.dataset.room,r=t.dataset.app,s=$.att,i=$.time,o=$.room,l=$.app;(a||i)&&a!=i&&c==o&&(n||s)&&(r||l)&&e.preventDefault()}function s(e){document.querySelectorAll("#scheduleCoffeeChat tbody tr.fadeRoom").forEach((function(e){e.classList.remove("fadeRoom")}))}return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"Coffee Chats"}),Object(p.jsx)("div",{id:"scheduleCoffeeChat",className:"scheduleTableContainer",children:Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{id:"roomNameCol",children:"Room Name"}),Object(p.jsx)("th",{children:"Appointments"}),Object(p.jsx)("th",{id:"extra",children:"Extra"})]})}),Object(p.jsx)("tbody",{children:Object.entries(t.companies).map((function(e){var n=Object(j.a)(e,2),i=n[0],o=n[1];return Object.entries(o).map((function(e){var n=Object(j.a)(e,2),o=n[0],l=n[1],d=l.coffeeChat;if(null==d)return null;var u=V.fromStr(d),h=new Set(d.candidates);return Object(p.jsxs)("tr",{"data-room":o,children:[Object(p.jsxs)("td",{className:"ccRowLabel",children:[Object(p.jsx)("p",{className:"ccRoomName",children:o}),Object(p.jsxs)("p",{className:"ccRoomDate",children:["(",_(u.start),", ",_(u.end),")"]})]}),Object(p.jsx)("td",{children:Object(p.jsx)("div",{className:"row centerCross",children:l.apps.map((function(e){if(!e.isCoffeeChat)return null;null!=(null==e.att?null:t.attendees[e.att])&&h.delete(e.att);var n=[d,e.att].includes(void 0)?null:H(t,i,o,e.att);return Object(p.jsx)("div",{className:"appContainer centerAll",children:Object(p.jsxs)("div",{"data-att":e.att,"data-time":z(u.start),"data-room":o,"data-app":JSON.stringify(e),className:"app col centerAll ".concat(e.att?"":"empty"," cc"),draggable:null!=e.att,onDragStart:a,onDragEnd:s,onDrop:c,onDragOver:r,children:[Object(p.jsx)("div",{className:"ccIcon",children:m.Coffee}),Object(p.jsxs)("div",{className:"appLength",children:[u.lengthMins,"m"]}),Object(p.jsx)("span",{className:"appAtt",children:e.att||"?"}),Object(p.jsx)("span",{className:"appTime",children:z(u.start)}),Object(p.jsx)("span",{className:"appPref",children:null==e.att?null:"rank: ".concat(n)})]})})}))})}),Object(p.jsx)("td",{children:Object(p.jsxs)("div",{className:"row centerCross",children:[Object(p.jsx)("div",{className:"appContainer notSelected centerAll",children:Object(p.jsx)("div",{className:"app removeApp col centerAll cc","data-room":o,onDrop:c,onDragOver:r,children:Object(p.jsx)("span",{className:"appAtt",children:"remove"})})}),Array.from(h).map((function(e){t.attendees[e];var n=H(t,i,o,e);return Object(p.jsx)("div",{className:"appContainer notSelected centerAll",children:Object(p.jsxs)("div",{className:"app col centerAll cc",draggable:!0,"data-att":e,"data-room":o,onDragStart:a,onDragEnd:s,onDrop:c,onDragOver:r,children:[Object(p.jsx)("div",{className:"ccIcon",children:m.Coffee}),Object(p.jsxs)("span",{className:"appPref",children:["rank: ",n]}),Object(p.jsx)("span",{className:"appAtt",children:e})]})},e)}))]})})]})}))}))})]})})]})}function ne(e){var t=e.schedule,n=q(t);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{children:"Attendees"}),Object(p.jsx)("div",{id:"scheduleAttendee",className:"scheduleTableContainer",children:Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{id:"roomNameCol",children:"Attendee"}),n.map((function(e,t){return Object(p.jsx)("th",{children:_(e)},t)})),Object(p.jsx)("th",{id:"extra",children:"Extra"})]})}),Object(p.jsx)("tbody",{children:Object.entries(t.attendees).map((function(e){var a=Object(j.a)(e,2),c=a[0],r=a[1],s={},i={},o=parseInt(c);if((X[o]||new Set).size+(Y[o]||new Set).size!=0){var l=K[o]||[];l.sort((function(e,t){return+V.fromStr(e.iApp).start-+V.fromStr(t.iApp).start}));var d,u=new Set(X[o]),f=new Set(Y[o]),b=0,v=Object(h.a)(l);try{for(v.s();!(d=v.n()).done;){var x=d.value;if(null!=x.att)(x.isCoffeeChat?f:u).delete(x.roomName);for(var O=V.fromStr(x.iApp);b<n.length&&W(n[b],1)<=O.start;b++);s[+n[b]]=s[+n[b]]||[],s[+n[b]].push(x)}}catch(N){v.e(N)}finally{v.f()}b=0;var g,y=Object(h.a)(r.commitments);try{for(y.s();!(g=y.n()).done;){for(var C=g.value,w=V.fromStr(C);b<n.length&&W(n[b],1)<=w.start;b++);i[+n[b]]=i[+n[b]]||[],i[+n[b]].push(w)}}catch(N){y.e(N)}finally{y.f()}return Object(p.jsxs)("tr",{children:[Object(p.jsxs)("td",{children:[o,". ",r.name]}),n.map((function(e){return Object(p.jsxs)("td",{children:[(i[+e]||[]).map((function(e){var t=e.lengthMins/60*100,n=e.start.getMinutes()/60*100;return Object(p.jsx)("div",{"data-app":"".concat(_(e.start)," ").concat(_(e.end)),className:"appContainer centerAll",style:{left:"".concat(n,"%"),width:"".concat(t,"%")},children:Object(p.jsxs)("div",{className:"app col centerAll ".concat("empty"),children:[Object(p.jsxs)("div",{className:"appLength",children:[e.lengthMins,"m"]}),Object(p.jsx)("span",{className:"appPref"}),Object(p.jsx)("span",{className:"appAtt",children:"break"}),Object(p.jsx)("span",{className:"appTime",children:z(e.start)})]})},o+e.toString())})),(s[+e]||[]).map((function(e){var n=V.fromStr(e.iApp),a=n.lengthMins/60*100,c=n.start.getMinutes()/60*100,r=null==e.att?null:t.attendees[e.att],s=e.isCoffeeChat&&e.att?H(t,e.companyName,e.roomName,e.att):null;return Object(p.jsx)("div",{"data-app":"".concat(_(n.start)," ").concat(_(n.end)),className:"appContainer centerAll",style:{left:"".concat(c,"%"),width:"".concat(a,"%")},children:Object(p.jsxs)("div",{className:"app col centerAll ".concat(e.att?"":"empty"," ").concat(e.isCoffeeChat?"cc":""),children:[e.isCoffeeChat?Object(p.jsx)("div",{className:"ccIcon",children:m.Coffee}):null,Object(p.jsxs)("div",{className:"appLength",children:[n.lengthMins,"m"]}),Object(p.jsx)("span",{className:"appAtt",title:e.roomName,children:e.roomName}),Object(p.jsx)("span",{className:"appTime",children:z(n.start)}),Object(p.jsx)("span",{className:"appPref",children:null==r?null:e.isCoffeeChat?"rank: ".concat(s):"pref: ".concat(null===r||void 0===r?void 0:r.prefs[e.companyName])})]})},o+n.toString())}))]},+e)})),Object(p.jsx)("td",{children:Object(p.jsx)("div",{className:"row",children:[!1,!0].map((function(e){var n=e?f:u;return Array.from(n).map((function(n){var a=Q[n],c=e?H(t,a,n,o):null;return Object(p.jsx)("div",{className:"appContainer notSelected centerAll",children:Object(p.jsxs)("div",{className:"app col centerAll ".concat(e?"cc":""),children:[e?Object(p.jsx)("div",{className:"ccIcon",children:m.Coffee}):null,Object(p.jsx)("span",{className:"appPref",children:e?"rank: ".concat(c):"pref: ".concat(r.prefs[a])}),Object(p.jsx)("span",{className:"appAtt",children:a})]})},o)}))}))})})]})}}))})]})})]})}var ae=function(){var e=r.a.useState(null),t=Object(j.a)(e,2),n=t[0],c=t[1],s=r.a.useState(!1),i=Object(j.a)(s,2),l=i[0],h=i[1],f=function(e,t,r,s,i){h(!0),g("/swapSchedule",a.POST,{data:Object(o.a)(Object(o.a)({},n),{},{app1:null!==t&&void 0!==t?t:null,att1:null!==r&&void 0!==r?r:null,app2:null!==s&&void 0!==s?s:null,att2:null!==i&&void 0!==i?i:null,isCoffeeChat:e})}).then((function(e){var t=e.data;c(t)})).catch((function(e){console.log("res",e),alert(e.error)})).finally((function(){return h(!1)}))};return Object(p.jsxs)("div",{id:"schedulePage",className:"col centerCross",children:[Object(p.jsxs)("button",{id:"generateButt",className:"row centerAll",onClick:function(){h(!0),x("/generateSchedule",a.GET).then((function(e){var t=e.data;c(t)})).catch((function(e){console.log("res",e),alert(e.error)})).finally((function(){return h(!1)}))},children:[m.Generate,Object(p.jsx)("p",{children:"generate schedule"})]}),Object(p.jsxs)("div",{id:"schedContainer",className:"col centerCross",children:[l?Object(p.jsx)("div",{id:"schedLoader",className:"row centerAll",children:Object(p.jsx)("div",{className:"loader"})}):null,null==n?null:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{id:"schedulesStats",className:"row center",children:[Object(p.jsxs)("p",{children:["Appointments Filled: ",Object(p.jsxs)("span",{children:[n.noAppointmentsNotEmpty,"/",n.noAppointments]})]}),Object(p.jsxs)("p",{children:["Avg No. Appointments: ",Object(p.jsx)("span",{children:(n.noAppointmentsNotEmpty/n.noAttendeeesChosen).toFixed(2)})]}),Object(p.jsxs)("p",{children:["Var of No. Appointments: ",Object(p.jsx)("span",{children:n.varNoAppointments.toFixed(2)})]}),Object(p.jsxs)("p",{children:["Average Rank: ",Object(p.jsx)("span",{children:(n.totalUtility/n.noAppointmentsNotEmpty).toFixed(2)})]})]}),Object(p.jsxs)("div",{id:"schedules",children:[Object(p.jsx)(ee,{schedule:n,swapFunc:f}),Object(p.jsx)(te,{schedule:n,swapFunc:f}),Object(p.jsx)(ne,{schedule:n})]}),Object(p.jsxs)("button",{id:"writeScheduleButt",className:"row centerAll",onClick:function(){h(!0),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(a,c){O(e,t,JSON.stringify(n),{Accept:"application/json","Content-Type":"application/json"}).then(function(){var e=Object(u.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=10;break}return e.t0=c,e.t1=alert,e.next=5,t.json();case 5:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3),e.next=20;break;case 10:return n=t.headers.get("Content-Type"),r=/.+filename="([^"]+)"/g.exec(t.headers.get("Content-Disposition"))[1],e.t4=y,e.t5=n,e.next=16,t.text();case 16:e.t6=e.sent,e.t7=r,(0,e.t4)(e.t5,e.t6,e.t7),a();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}("/writeSchedule",a.POST,{data:n}).finally((function(){return h(!1)}))},children:[m.Edit,Object(p.jsx)("p",{children:"write schedule"})]})]})]})]})};n(23),n(24),n(25);var ce=function(){var e,t=r.a.useState(!0),n=Object(j.a)(t,2),c=n[0],s=n[1],i=r.a.useState(!1),l=Object(j.a)(i,2),f=l[0],b=l[1],v={},O=Object(h.a)(N);try{for(O.s();!(e=O.n()).done;){v[e.value.name]=[]}}catch(D){O.e(D)}finally{O.f()}var g=r.a.useState(v),y=Object(j.a)(g,2),C=y[0],w=y[1];function T(e){return A.apply(this,arguments)}function A(){return A=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x("/get".concat(t.endpoint),a.GET).then((function(e){return e.data})).catch((function(e){return console.log("res",e),alert(e.error),[]})));case 1:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function S(e){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(d.a.mark((function e(t){var n,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(h.a)(N),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=10;break}return c=a.value,e.next=7,T(c);case 7:C[c.name]=e.sent;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:w(Object(o.a)({},t));case 19:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})))).apply(this,arguments)}return r.a.useEffect((function(){S(C)}),[]),r.a.useEffect((function(){var e,t=!0,n=Object(h.a)(N);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(a.mandatory&&!a.isLoaded(C)){t=!1;break}}}catch(D){n.e(D)}finally{n.f()}b(t)}),[C]),Object(p.jsxs)("div",{children:[Object(p.jsxs)("header",{children:[Object(p.jsxs)("div",{id:"banner",className:"row",children:[Object(p.jsx)("div",{id:"calendarContainer",className:"centerAll",children:m.Calendar}),Object(p.jsx)("div",{id:"titleContainer",className:"spacer centerCross",children:Object(p.jsx)("h1",{id:"",children:"Interview Scheduling Tool"})})]}),Object(p.jsxs)("div",{id:"navButtons",className:"centerAll",children:[Object(p.jsx)("button",{className:c?"selected":"",onClick:function(){return s(!0)},children:"Configuration"}),Object(p.jsx)("button",{className:c?"":"selected",disabled:!f,title:f?"":"mandatory tables not uploaded",onClick:function(){return s(!1)},children:"Schedule"})]})]}),Object(p.jsx)("div",{children:c?Object(p.jsx)(G,{tableData:C,updateTableData:S}):Object(p.jsx)(ae,{})})]})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(ce,{})}),document.getElementById("root")),re()}},[[26,1,2]]]);
//# sourceMappingURL=main.ae3b0334.chunk.js.map