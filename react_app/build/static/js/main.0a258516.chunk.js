(this.webpackJsonpinterview_scheduler=this.webpackJsonpinterview_scheduler||[]).push([[0],{18:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var a,c=n(1),r=n.n(c),s=n(13),o=n.n(s),i=(n(18),n(3)),l=n.n(i),d=n(5),u=n(4),h=n(2),j=n(0),p=Object(j.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"chevron-left",className:"chevron svg-inline--fa fa-chevron-left fa-w-10",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"-96 0 512 512",children:Object(j.jsx)("path",{fill:"currentColor",d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"})}),f={ChevronDown:Object(j.jsx)("div",{className:"centerAll",style:{transform:"rotate(-90deg)"},children:p}),ChevronUp:Object(j.jsx)("div",{className:"centerAll",style:{transform:"rotate(90deg)"},children:p}),Calendar:Object(j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-calendar",children:[Object(j.jsx)("rect",{x:3,y:4,width:18,height:18,rx:2,ry:2}),Object(j.jsx)("line",{x1:16,y1:2,x2:16,y2:6}),Object(j.jsx)("line",{x1:8,y1:2,x2:8,y2:6}),Object(j.jsx)("line",{x1:3,y1:10,x2:21,y2:10})]}),Upload:Object(j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-upload",children:[Object(j.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),Object(j.jsxs)("g",{className:"uploadArrow",children:[Object(j.jsx)("polyline",{points:"17 8 12 3 7 8"}),Object(j.jsx)("line",{x1:12,y1:3,x2:12,y2:15})]})]}),CheckMark:Object(j.jsxs)("svg",{style:{color:"var(--green)"},xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-check-square",children:[Object(j.jsx)("polyline",{points:"9 11 12 14 22 4"}),Object(j.jsx)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]}),PlusSign:Object(j.jsxs)("svg",{style:{color:"var(--blue)"},xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-plus-square",children:[Object(j.jsx)("rect",{x:3,y:3,width:18,height:18,rx:2,ry:2}),Object(j.jsx)("line",{x1:12,y1:8,x2:12,y2:16}),Object(j.jsx)("line",{x1:8,y1:12,x2:16,y2:12})]}),CrossSign:Object(j.jsxs)("svg",{style:{color:"var(--red)"},xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-x-square",children:[Object(j.jsx)("rect",{x:3,y:3,width:18,height:18,rx:2,ry:2}),Object(j.jsx)("line",{x1:9,y1:9,x2:15,y2:15}),Object(j.jsx)("line",{x1:15,y1:9,x2:9,y2:15})]}),Generate:Object(j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-refresh-cw",children:[Object(j.jsx)("polyline",{points:"23 4 23 10 17 10"}),Object(j.jsx)("polyline",{points:"1 20 1 14 7 14"}),Object(j.jsx)("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]}),Coffee:Object(j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-coffee",children:[Object(j.jsx)("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),Object(j.jsx)("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),Object(j.jsx)("line",{x1:6,y1:1,x2:6,y2:4}),Object(j.jsx)("line",{x1:10,y1:1,x2:10,y2:4}),Object(j.jsx)("line",{x1:14,y1:1,x2:14,y2:4})]}),Edit:Object(j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-edit",children:[Object(j.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),Object(j.jsx)("path",{className:"editPen",d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})},m=(n(21),n(8)),b=n(9);function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(c,r){return x(e,t,n,a).then(function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.t0=r,e.next=4,t.json();case 4:e.t1=e.sent,(0,e.t0)(e.t1),e.next=13;break;case 8:return e.t2=c,e.next=11,t.json();case 11:e.t3=e.sent,(0,e.t2)(e.t3);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}function x(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=e.replace(/[ \t\n]/g,"");var r="".concat("./","/").concat(e);return fetch(r,{method:a[t],body:n,headers:c})}!function(e){e[e.POST=0]="POST",e[e.GET=1]="GET",e[e.PUT=2]="PUT"}(a||(a={}));var O=function(){var e=Object(d.a)(l.a.mark((function e(t,n,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v(t,n,JSON.stringify(a),{Accept:"application/json","Content-Type":"application/json"}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();function g(e,t,n){var a=document.createElement("a");a.href="data:".concat(e,",").concat(encodeURIComponent(t)),a.download=n,a.click()}var y;function C(e){switch(e){case y.STRING:return"string";case y.INT:return"integer";case y.DATETIME:return"datetime";default:throw Error("unhandled col type for ColumnTypeToStr(): ".concat(y))}}!function(e){e[e.STRING=0]="STRING",e[e.INT=1]="INT",e[e.DATETIME=2]="DATETIME"}(y||(y={}));var w=[],N=function(){function e(t,n,a,c,r,s){Object(m.a)(this,e),this.name=void 0,this.endpoint=void 0,this.desc=void 0,this.columns=void 0,this.mandatory=void 0,this.dependencies=void 0,w.push(this),this.name=t,this.endpoint=n,this.desc=a,this.mandatory=r,this.dependencies=null!==s&&void 0!==s?s:[],this.columns=[];var o,i=Object(u.a)(c);try{for(i.s();!(o=i.n()).done;){var l=o.value;this.addColumn(l)}}catch(d){i.e(d)}finally{i.f()}}return Object(b.a)(e,[{key:"addColumn",value:function(e){var t;return this.columns.push(e),e.table=null!==(t=e.table)&&void 0!==t?t:this,this}},{key:"getValues",value:function(e){return e[this.name]}},{key:"isDependenciesLoaded",value:function(e){return this.dependencies.every((function(t){return t.isLoaded(e)}))}},{key:"isLoaded",value:function(e){var t,n;return 0<(null!==(t=null===(n=e[this.name])||void 0===n?void 0:n.length)&&void 0!==t?t:-1)}}]),e}(),T=new N("Convention Times","ConventionTimes","This is a list of valid times for the convention.",[{name:"Start Time",type:y.DATETIME},{name:"End Time",type:y.DATETIME,desc:"must be greater than start time"}],!0),A={name:"Company Name",type:y.STRING},S={name:"Room Name",type:y.STRING},k=new N("Company Rooms","CompanyRooms","This is a list of companies participating, and their rooms.",[A,S],!0),D=new N("Room Interviews","RoomInterviews","This is a list of rooms with interviews.",[S,{name:"Length",type:y.INT,desc:"in minutes"},{name:"Start Time",type:y.DATETIME},{name:"End Time",type:y.DATETIME,desc:"must be greater than start time"}],!1,[T,k]),E=(new N("Room Breaks","RoomBreaks","This is a list of room breaks.",[S,{name:"Start Time",type:y.DATETIME},{name:"End Time",type:y.DATETIME,desc:"must be greater than start time"}],!1,[k,D]),{name:"Attendee ID",type:y.STRING}),I=new N("Attendees","AttendeeNames","This is a list of attendees (students attending ASNA).",[E,{name:"Attendee Name",type:y.STRING}],!0),L=(new N("Attendee Breaks","AttendeeBreaks","This is a list of attendee breaks.",[E,{name:"Start Time",type:y.DATETIME},{name:"End Time",type:y.DATETIME,desc:"must be greater than start time"}],!1,[T,I]),new N("Attendee Preferences","AttendeePrefs","This is a list of the preferences an attendee has for a company.",[E,A,{name:"Preference",type:y.INT,desc:"must be positive, the smaller the better"}],!1,[I,k]),new N("Interview Candidates","InterviewCandidates","This is a list of interview candidates.",[S,E],!1,[k,D,I]),new N("Coffee Chats","CoffeeChats","This is a list of room coffee chats.",[S,{name:"Capacity",type:y.INT,desc:"must be positive"},{name:"Start Time",type:y.DATETIME},{name:"End Time",type:y.DATETIME,desc:"must be greater than start time"}],!1,[T,k]));new N("Coffee Chat Candidates","CoffeeChatCandidates","This is a list of room coffee chats candidates, and the rank the company ascribes that candidate.",[S,E,{name:"Rank",type:y.INT,desc:"must be positive, the smaller the better"}],!1,[I,k,L]);function M(e,t){switch(t){case y.STRING:case y.INT:return e;case y.DATETIME:var n=new Date(Date.parse(e)),a=n.toLocaleString("default",{month:"short"}),c=n.getMinutes().toString().padStart(2,"0");return"".concat(a," ").concat(n.getDate(),", ").concat(n.getHours(),":").concat(c);default:throw Error("unhandled col type for FormatColumn(): ".concat(y))}}var R=function(e){return"filename|".concat(e.name)};function P(e){var t=e.table,n=e.tableData,c=e.updateTableData,s=e.isLoading,o=e.setIsLoading,i=r.a.useRef(null),u=r.a.useState(""),p=Object(h.a)(u,2),m=p[0],b=p[1];function x(){return(x=Object(d.a)(l.a.mark((function e(){var n,r,s,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(n=i.current)){e.next=3;break}return e.abrupt("return");case 3:if(null!=(r=n.files)&&0!=r.length){e.next=9;break}return n.setCustomValidity("Please select file"),e.abrupt("return",n.reportValidity());case 9:n.setCustomValidity("");case 10:s=r[0],(d=new FormData).append("table",s),o(!0),v("/set".concat(t.endpoint),a.POST,d).then((function(e){e.data;alert("Uploaded table: ".concat(t.name)),b(s.name),localStorage.setItem(R(t),s.name),c()})).catch((function(e){console.log("res",e),alert(e.error)})).finally((function(){o(!1)}));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.a.useEffect((function(){b(function(e,t){var n=localStorage.getItem(R(e));return null!==n&&void 0!==n?n:e.isLoaded(t)?"<unknown filename>":""}(t,n))}),[JSON.stringify(n)]);var O=t.isDependenciesLoaded(n);return s?Object(j.jsx)("div",{className:"loader"}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("label",{id:"htmlUploadContainer",children:[Object(j.jsx)("input",{onChange:function(){var e=i.current;if(null!=e){var t=e.files;null!=t&&0<t.length?function(){x.apply(this,arguments)}():b("")}},ref:i,name:"file",accept:".csv",type:"file",disabled:!O}),Object(j.jsxs)("div",{id:"htmlUpload",className:"col centerCross clickable whiteWhenHovered ".concat(O?"":"disabled"),children:[Object(j.jsxs)("div",{className:"row centerCross",children:[f.Upload,Object(j.jsx)("p",{children:"choose file"})]}),Object(j.jsx)("p",{children:"(.csv)"})]})]}),Object(j.jsx)("p",{children:Object(j.jsx)("i",{children:O?""==m?"No file selected":m:"dependencies not loaded"})})]})}function F(e){var t=e.table,n=e.col,a=[C(n.type)];return t!=n.table&&a.push("must be defined in the ".concat(n.table.name," table")),n.desc&&a.push(n.desc),Object(j.jsxs)("div",{className:"column",children:[Object(j.jsx)("b",{children:n.name})," \u2022 ",a.join(", ")]})}function B(e){var t=e.table,n=e.isSelected,a=e.scrollTo,c=e.tableData,s=e.updateTableData,o=r.a.useState(t.getValues(c)),i=Object(h.a)(o,2),l=i[0],d=i[1],u=r.a.useState(!1),p=Object(h.a)(u,2),m=p[0],b=p[1],v=function(e){return e.isDependenciesLoaded(c)},x=r.a.useState(v(t)),O=Object(h.a)(x,2),g=O[0],y=O[1],C=r.a.useRef(null);return r.a.useEffect((function(){var e;n&&(null===(e=C.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"}));y(!0),a(null)}),[n]),r.a.useEffect((function(){y(v(t))}),[v(t)]),r.a.useEffect((function(){d(t.getValues(c))}),[JSON.stringify(t.getValues(c))]),Object(j.jsxs)("div",{ref:C,className:"table",children:[Object(j.jsxs)("div",{className:"tableHeader row clickable",onClick:function(){return y(!g)},children:[Object(j.jsx)("div",{className:"tableChevronContainer",children:g?f.ChevronDown:f.ChevronUp}),Object(j.jsxs)("h2",{className:"centerAll",title:"".concat(t.name).concat(t.mandatory?" (mandatory)":""),children:[t.name,t.mandatory&&" *"]}),Object(j.jsx)("div",{className:"spacer"}),Object(j.jsx)("div",{className:"tableAvailability centerAll",children:t.isDependenciesLoaded(c)?t.isLoaded(c)?f.CheckMark:f.PlusSign:f.CrossSign})]}),g?Object(j.jsxs)("div",{className:"tableConfig col",children:[Object(j.jsx)("div",{className:"tableDesc",children:Object(j.jsx)("p",{children:t.desc})}),0==t.dependencies.length?null:Object(j.jsxs)("div",{className:"tableDependencies",children:[Object(j.jsx)("h3",{children:"Depends on:"}),Object(j.jsx)("ul",{children:t.dependencies.map((function(e,t){return Object(j.jsxs)("li",{className:"dependency row centerCross clickable",onClick:function(){return a(e)},children:[Object(j.jsxs)("p",{children:[e.name," table"]}),Object(j.jsx)("div",{className:"dependencyIcon row centerCross",children:e.isLoaded(c)?f.CheckMark:f.CrossSign})]},t)}))})]}),Object(j.jsxs)("div",{className:"tableColumns",children:[Object(j.jsx)("h3",{children:"Columns:"}),Object(j.jsx)("ul",{children:t.columns.map((function(e,n){return Object(j.jsx)("li",{children:Object(j.jsx)(F,{table:t,col:e})},n)}))})]}),Object(j.jsxs)("div",{className:"tableUpload col centerCross",children:[Object(j.jsx)(P,{table:t,tableData:c,updateTableData:s,isLoading:m,setIsLoading:b}),!m&&t.isLoaded(c)?Object(j.jsx)("div",{className:"tableTable",children:Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsx)("tr",{children:t.columns.map((function(e,t){return Object(j.jsx)("th",{children:e.name},t)}))})}),Object(j.jsx)("tbody",{children:l.map((function(e,n){return Object(j.jsxs)("tr",{children:[e.map((function(e,n){return Object(j.jsx)("td",{children:M(e,t.columns[n].type)},n)}))," "]},n)}))})]})}):null]})]}):null]})}var G=function(e){var t=e.tableData,n=e.updateTableData,a=r.a.useState(null),c=Object(h.a)(a,2),s=c[0],o=c[1];return Object(j.jsx)("div",{id:"configPage",children:w.map((function(e){return Object(j.jsx)(B,{table:e,isSelected:s==e,scrollTo:function(e){return o(e)},tableData:t,updateTableData:n},e.name)}))})},U=n(12),V=n(11),J=(n(22),function(){function e(t,n){Object(m.a)(this,e),this.start=void 0,this.end=void 0,this.lengthMins=void 0,this.start=t,this.end=n,this.lengthMins=(+n-+t)/1e3/60}return Object(b.a)(e,null,[{key:"fromStr",value:function(t){return new e(new Date(t.start),new Date(t.end))}}]),e}()),H=function e(t,n,a,c){Object(m.a)(this,e),this.att=void 0,this.companyName=void 0,this.roomName=void 0,this.interval=void 0,this.isCoffeeChat=void 0,this.iApp=void 0,this.att=t,this.companyName=n,this.roomName=a,this.interval=J.fromStr(c),this.isCoffeeChat=c.isCoffeeChat,this.iApp=c};function W(e,t,n,a){var c,r=null===(c=e.companies[t][n].coffeeChat)||void 0===c?void 0:c.candidates;return r?r.indexOf(a)+1:null}function q(e,t){var n=new Date(e);return n.setHours(e.getHours()+t),n}function z(e){var t,n=e.conventionTimes.map((function(e){return J.fromStr(e)})),a=[],c=Object(u.a)(n);try{for(c.s();!(t=c.n()).done;)for(var r=t.value,s=r.start;s<r.end;s=q(s,1))a.push(s)}catch(o){c.e(o)}finally{c.f()}return a}var _=function(e){return new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",hour12:!0}).format(e)};function K(e){var t=_(e),n=new Intl.DateTimeFormat("en-US",{month:"short"}).format(e),a=e.getDate();return"".concat(n," ").concat(a,", ").concat(t)}var Q={},X={},Y={},Z={},$={},ee={app:null,room:null,att:null,time:null};function te(e){var t=e.schedule,n=e.swapFunc,a=z(t);function c(e){console.log("draggin");var t=e.target,n=t.dataset.att,a=t.dataset.time,c=t.dataset.room,r=t.dataset.app;ee.att=null!==n&&void 0!==n?n:"",ee.time=null!==a&&void 0!==a?a:"",ee.room=null!==c&&void 0!==c?c:"",ee.app=null!==r&&void 0!==r?r:"",document.querySelectorAll("#scheduleCompany tbody tr:not([data-room='".concat(c,"'])")).forEach((function(e){e.classList.add("fadeRoom")}))}function r(e){console.log("droppin"),e.preventDefault();var t=e.currentTarget,a=t.dataset.att,c=t.dataset.time,r=t.dataset.room,s=t.dataset.app,o=ee.att,i=ee.time,l=ee.room,d=ee.app,u=r||l,j=[a,o].map((function(e){return e?parseInt(e):void 0})),p=Object(h.a)(j,2),f=p[0],m=p[1],b=[s,d].map((function(e){return e?JSON.parse(e):void 0})),v=Object(h.a)(b,2),x=v[0],O=v[1],g=function(e,t){return"".concat(e?"Attendee ".concat(e):"Appointment").concat(t?" @ ".concat(t):"")};window.confirm(f||x?"Are you sure you want to swap ".concat(g(m,i)," with ").concat(g(f,c)," for ").concat(u,"?"):"Are you sure you want to move ".concat(g(m,i)," out of the schedule (to the extra column) for ").concat(u,"?"))&&n(!1,x,f,O,m)}function s(e){var t=e.target,n=t.dataset.att,a=t.dataset.time,c=t.dataset.room,r=t.dataset.app,s=ee.att,o=ee.time,i=ee.room,l=ee.app;(a||o)&&a!=o&&c==i&&(n||s)&&(r||l)&&e.preventDefault()}function o(e){document.querySelectorAll("#scheduleCompany tbody tr.fadeRoom").forEach((function(e){e.classList.remove("fadeRoom")}))}return Q={},Y={},Z={},X={},$={},Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"Interviews"}),Object(j.jsx)("div",{id:"scheduleCompany",className:"scheduleTableContainer",children:Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{id:"roomNameCol",children:"Room Name"}),a.map((function(e,t){return Object(j.jsx)("th",{children:K(e)},t)})),Object(j.jsx)("th",{id:"extra",children:"Extra"})]})}),Object(j.jsx)("tbody",{children:Object.entries(t.companies).map((function(e){var n=Object(h.a)(e,2),i=n[0],l=n[1];return Object.entries(l).map((function(e){var n=Object(h.a)(e,2),l=n[0],d=n[1],p={},m=!1,b=0;X[l]=i;var v,x=new Set(d.candidates),O=Object(u.a)(d.candidates);try{for(O.s();!(v=O.n()).done;){var g=v.value;Y[g]=Y[g]||new Set,Y[g].add(l)}}catch(D){O.e(D)}finally{O.f()}if(d.coffeeChat){var y,C=Object(u.a)(d.coffeeChat.candidates);try{for(C.s();!(y=C.n()).done;){var w=y.value;Z[w]=Z[w]||new Set,Z[w].add(l)}}catch(D){C.e(D)}finally{C.f()}}var N,T=Object(u.a)(d.apps);try{for(T.s();!(N=T.n()).done;){var A=N.value,S=new H(A.att,i,l,A);if(null!=S.att&&(S.isCoffeeChat||x.delete(S.att),Q[S.att]=[].concat(Object(V.a)(Q[S.att]||[]),[S])),S.isCoffeeChat){if($[l]=[].concat(Object(V.a)($[l]||[]),[S]),m)continue;m=!0}for(var k=S.interval;b<a.length&&q(a[b],1)<=k.start;b++);p[+a[b]]=p[+a[b]]||[],p[+a[b]].push(S)}}catch(D){T.e(D)}finally{T.f()}return Object(j.jsxs)("tr",{"data-room":l,children:[Object(j.jsx)("td",{children:l}),a.map((function(e){return Object(j.jsx)("td",{children:(p[+e]||[]).map((function(e){var n=e.interval,a=n.lengthMins/60*100,d=n.start.getMinutes()/60*100,u=null==e.att?null:t.attendees[e.att];return Object(j.jsx)("div",{className:"appContainer centerAll",style:{left:"".concat(d,"%"),width:"".concat(a,"%")},children:Object(j.jsxs)("div",{"data-att":e.isCoffeeChat?null:e.att,"data-time":_(n.start),"data-room":l,"data-app":e.isCoffeeChat?null:JSON.stringify(e.iApp),className:"app col centerAll ".concat(e.att?"":"empty"," ").concat(e.isCoffeeChat?"cc":""),draggable:null!=e.att&&!e.isCoffeeChat,onDragStart:e.isCoffeeChat?function(){}:c,onDragEnd:e.isCoffeeChat?function(){}:o,onDrop:e.isCoffeeChat?function(){}:r,onDragOver:e.isCoffeeChat?function(){}:s,children:[e.isCoffeeChat?Object(j.jsx)("div",{className:"ccIcon",children:f.Coffee}):null,Object(j.jsxs)("div",{className:"appLength",children:[n.lengthMins,"m"]}),Object(j.jsx)("span",{className:"appAtt",children:e.isCoffeeChat?"coffee chat":e.att||"?"}),Object(j.jsx)("span",{className:"appTime",children:_(n.start)}),Object(j.jsx)("span",{className:"appPref",children:null==u||e.isCoffeeChat?null:"pref: ".concat(null===u||void 0===u?void 0:u.prefs[i])})]})},l+n.toString())}))},+e)})),Object(j.jsx)("td",{children:Object(j.jsxs)("div",{className:"row centerCross",children:[Object(j.jsx)("div",{className:"appContainer notSelected centerAll",children:Object(j.jsx)("div",{className:"app removeApp col centerAll","data-room":l,onDrop:r,onDragOver:s,children:Object(j.jsx)("span",{className:"appAtt",children:"remove"})})}),Array.from(x).map((function(e){var n=t.attendees[e];return Object(j.jsx)("div",{className:"appContainer notSelected centerAll",children:Object(j.jsxs)("div",{className:"app col centerAll",draggable:!0,"data-att":e,"data-room":l,onDragStart:c,onDragEnd:o,onDrop:r,onDragOver:s,children:[Object(j.jsxs)("span",{className:"appPref",children:["pref: ",n.prefs[i]]}),Object(j.jsx)("span",{className:"appAtt",children:e})]})},e)}))]})})]})}))}))})]})})]})}function ne(e){var t=e.schedule,n=e.swapFunc;function a(e){console.log("draggin");var t=e.target,n=t.dataset.att,a=t.dataset.time,c=t.dataset.room,r=t.dataset.app;ee.att=null!==n&&void 0!==n?n:"",ee.time=null!==a&&void 0!==a?a:"",ee.room=null!==c&&void 0!==c?c:"",ee.app=null!==r&&void 0!==r?r:"",document.querySelectorAll("#scheduleCoffeeChat tbody tr:not([data-room='".concat(c,"'])")).forEach((function(e){e.classList.add("fadeRoom")}))}function c(e){console.log("droppin"),e.preventDefault();var t=e.currentTarget,a=t.dataset.att,c=t.dataset.time,r=t.dataset.room,s=t.dataset.app,o=ee.att,i=ee.time,l=ee.room,d=ee.app,u=r||l,j=[a,o].map((function(e){return e?parseInt(e):void 0})),p=Object(h.a)(j,2),f=p[0],m=p[1],b=[s,d].map((function(e){return e?JSON.parse(e):void 0})),v=Object(h.a)(b,2),x=v[0],O=v[1],g=function(e,t){return"".concat(e?"Attendee ".concat(e):"Appointment").concat(t?" @ ".concat(t):"")};window.confirm(f||x?"Are you sure you want to swap ".concat(g(m,i)," with ").concat(g(f,c)," for ").concat(u,"?"):"Are you sure you want to move ".concat(g(m,i)," out of the schedule (to the extra column) for ").concat(u,"?"))&&n(!0,x,f,O,m)}function r(e){var t=e.target,n=t.dataset.att,a=t.dataset.time,c=t.dataset.room,r=t.dataset.app,s=ee.att,o=ee.time,i=ee.room,l=ee.app;(a||o)&&a!=o&&c==i&&(n||s)&&(r||l)&&e.preventDefault()}function s(e){document.querySelectorAll("#scheduleCoffeeChat tbody tr.fadeRoom").forEach((function(e){e.classList.remove("fadeRoom")}))}return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"Coffee Chats"}),Object(j.jsx)("div",{id:"scheduleCoffeeChat",className:"scheduleTableContainer",children:Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{id:"roomNameCol",children:"Room Name"}),Object(j.jsx)("th",{children:"Appointments"}),Object(j.jsx)("th",{id:"extra",children:"Extra"})]})}),Object(j.jsx)("tbody",{children:Object.entries(t.companies).map((function(e){var n=Object(h.a)(e,2),o=n[0],i=n[1];return Object.entries(i).map((function(e){var n=Object(h.a)(e,2),i=n[0],l=n[1],d=l.coffeeChat;if(null==d)return null;var u=J.fromStr(d),p=new Set(d.candidates);return Object(j.jsxs)("tr",{"data-room":i,children:[Object(j.jsxs)("td",{className:"ccRowLabel",children:[Object(j.jsx)("p",{className:"ccRoomName",children:i}),Object(j.jsxs)("p",{className:"ccRoomDate",children:["(",K(u.start),", ",K(u.end),")"]})]}),Object(j.jsx)("td",{children:Object(j.jsx)("div",{className:"row centerCross",children:l.apps.map((function(e){if(!e.isCoffeeChat)return null;null!=(null==e.att?null:t.attendees[e.att])&&p.delete(e.att);var n=[d,e.att].includes(void 0)?null:W(t,o,i,e.att);return Object(j.jsx)("div",{className:"appContainer centerAll",children:Object(j.jsxs)("div",{"data-att":e.att,"data-time":_(u.start),"data-room":i,"data-app":JSON.stringify(e),className:"app col centerAll ".concat(e.att?"":"empty"," cc"),draggable:null!=e.att,onDragStart:a,onDragEnd:s,onDrop:c,onDragOver:r,children:[Object(j.jsx)("div",{className:"ccIcon",children:f.Coffee}),Object(j.jsxs)("div",{className:"appLength",children:[u.lengthMins,"m"]}),Object(j.jsx)("span",{className:"appAtt",children:e.att||"?"}),Object(j.jsx)("span",{className:"appTime",children:_(u.start)}),Object(j.jsx)("span",{className:"appPref",children:null==e.att?null:"rank: ".concat(n)})]})})}))})}),Object(j.jsx)("td",{children:Object(j.jsxs)("div",{className:"row centerCross",children:[Object(j.jsx)("div",{className:"appContainer notSelected centerAll",children:Object(j.jsx)("div",{className:"app removeApp col centerAll cc","data-room":i,onDrop:c,onDragOver:r,children:Object(j.jsx)("span",{className:"appAtt",children:"remove"})})}),Array.from(p).map((function(e){t.attendees[e];var n=W(t,o,i,e);return Object(j.jsx)("div",{className:"appContainer notSelected centerAll",children:Object(j.jsxs)("div",{className:"app col centerAll cc",draggable:!0,"data-att":e,"data-room":i,onDragStart:a,onDragEnd:s,onDrop:c,onDragOver:r,children:[Object(j.jsx)("div",{className:"ccIcon",children:f.Coffee}),Object(j.jsxs)("span",{className:"appPref",children:["rank: ",n]}),Object(j.jsx)("span",{className:"appAtt",children:e})]})},e)}))]})})]})}))}))})]})})]})}function ae(e){var t=e.schedule,n=z(t);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"Attendees"}),Object(j.jsx)("div",{id:"scheduleAttendee",className:"scheduleTableContainer",children:Object(j.jsxs)("table",{children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{id:"roomNameCol",children:"Attendee"}),n.map((function(e,t){return Object(j.jsx)("th",{children:K(e)},t)})),Object(j.jsx)("th",{id:"extra",children:"Extra"})]})}),Object(j.jsx)("tbody",{children:Object.entries(t.attendees).map((function(e){var a=Object(h.a)(e,2),c=a[0],r=a[1],s={},o={},i=parseInt(c);if((Y[i]||new Set).size+(Z[i]||new Set).size!=0){var l=Q[i]||[];l.sort((function(e,t){return+J.fromStr(e.iApp).start-+J.fromStr(t.iApp).start}));var d,p=new Set(Y[i]),m=new Set(Z[i]),b=0,v=Object(u.a)(l);try{for(v.s();!(d=v.n()).done;){var x=d.value;if(null!=x.att)(x.isCoffeeChat?m:p).delete(x.roomName);for(var O=J.fromStr(x.iApp);b<n.length&&q(n[b],1)<=O.start;b++);s[+n[b]]=s[+n[b]]||[],s[+n[b]].push(x)}}catch(N){v.e(N)}finally{v.f()}b=0;var g,y=Object(u.a)(r.commitments);try{for(y.s();!(g=y.n()).done;){for(var C=g.value,w=J.fromStr(C);b<n.length&&q(n[b],1)<=w.start;b++);o[+n[b]]=o[+n[b]]||[],o[+n[b]].push(w)}}catch(N){y.e(N)}finally{y.f()}return Object(j.jsxs)("tr",{children:[Object(j.jsxs)("td",{children:[i,". ",r.name]}),n.map((function(e){return Object(j.jsxs)("td",{children:[(o[+e]||[]).map((function(e){var t=e.lengthMins/60*100,n=e.start.getMinutes()/60*100;return Object(j.jsx)("div",{"data-app":"".concat(K(e.start)," ").concat(K(e.end)),className:"appContainer centerAll",style:{left:"".concat(n,"%"),width:"".concat(t,"%")},children:Object(j.jsxs)("div",{className:"app col centerAll ".concat("empty"),children:[Object(j.jsxs)("div",{className:"appLength",children:[e.lengthMins,"m"]}),Object(j.jsx)("span",{className:"appPref"}),Object(j.jsx)("span",{className:"appAtt",children:"break"}),Object(j.jsx)("span",{className:"appTime",children:_(e.start)})]})},i+e.toString())})),(s[+e]||[]).map((function(e){var n=J.fromStr(e.iApp),a=n.lengthMins/60*100,c=n.start.getMinutes()/60*100,r=null==e.att?null:t.attendees[e.att],s=e.isCoffeeChat&&e.att?W(t,e.companyName,e.roomName,e.att):null;return Object(j.jsx)("div",{"data-app":"".concat(K(n.start)," ").concat(K(n.end)),className:"appContainer centerAll",style:{left:"".concat(c,"%"),width:"".concat(a,"%")},children:Object(j.jsxs)("div",{className:"app col centerAll ".concat(e.att?"":"empty"," ").concat(e.isCoffeeChat?"cc":""),children:[e.isCoffeeChat?Object(j.jsx)("div",{className:"ccIcon",children:f.Coffee}):null,Object(j.jsxs)("div",{className:"appLength",children:[n.lengthMins,"m"]}),Object(j.jsx)("span",{className:"appAtt",title:e.roomName,children:e.roomName}),Object(j.jsx)("span",{className:"appTime",children:_(n.start)}),Object(j.jsx)("span",{className:"appPref",children:null==r?null:e.isCoffeeChat?"rank: ".concat(s):"pref: ".concat(null===r||void 0===r?void 0:r.prefs[e.companyName])})]})},i+n.toString())}))]},+e)})),Object(j.jsx)("td",{children:Object(j.jsx)("div",{className:"row",children:[!1,!0].map((function(e){var n=e?m:p;return Array.from(n).map((function(n){var a=X[n],c=e?W(t,a,n,i):null;return Object(j.jsx)("div",{className:"appContainer notSelected centerAll",children:Object(j.jsxs)("div",{className:"app col centerAll ".concat(e?"cc":""),children:[e?Object(j.jsx)("div",{className:"ccIcon",children:f.Coffee}):null,Object(j.jsx)("span",{className:"appPref",children:e?"rank: ".concat(c):"pref: ".concat(r.prefs[a])}),Object(j.jsx)("span",{className:"appAtt",children:a})]})},i)}))}))})})]})}}))})]})})]})}var ce=function(){var e=r.a.useState(null),t=Object(h.a)(e,2),n=t[0],c=t[1],s=r.a.useState(!1),o=Object(h.a)(s,2),i=o[0],u=o[1],p=function(e,t,r,s,o){u(!0),O("/swapSchedule",a.POST,{data:Object(U.a)(Object(U.a)({},n),{},{app1:null!==t&&void 0!==t?t:null,att1:null!==r&&void 0!==r?r:null,app2:null!==s&&void 0!==s?s:null,att2:null!==o&&void 0!==o?o:null,isCoffeeChat:e})}).then((function(e){var t=e.data;c(t)})).catch((function(e){console.log("res",e),alert(e.error)})).finally((function(){return u(!1)}))};return Object(j.jsxs)("div",{id:"schedulePage",className:"col centerCross",children:[Object(j.jsxs)("button",{id:"generateButt",className:"row centerAll",onClick:function(){u(!0),v("/generateSchedule",a.GET).then((function(e){var t=e.data;c(t)})).catch((function(e){console.log("res",e),alert(e.error)})).finally((function(){return u(!1)}))},children:[f.Generate,Object(j.jsx)("p",{children:"generate schedule"})]}),Object(j.jsxs)("div",{id:"schedContainer",className:"col centerCross",children:[i?Object(j.jsx)("div",{id:"schedLoader",className:"row centerAll",children:Object(j.jsx)("div",{className:"loader"})}):null,null==n?null:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{id:"schedulesStats",className:"row center",children:[Object(j.jsxs)("p",{children:["Appointments Filled: ",Object(j.jsxs)("span",{children:[n.noAppointmentsNotEmpty,"/",n.noAppointments]})]}),Object(j.jsxs)("p",{children:["Avg No. Appointments: ",Object(j.jsx)("span",{children:(n.noAppointmentsNotEmpty/n.noAttendeeesChosen).toFixed(2)})]}),Object(j.jsxs)("p",{children:["Var of No. Appointments: ",Object(j.jsx)("span",{children:n.varNoAppointments.toFixed(2)})]}),Object(j.jsxs)("p",{children:["Average Rank: ",Object(j.jsx)("span",{children:(n.totalUtility/n.noAppointmentsNotEmpty).toFixed(2)})]})]}),Object(j.jsxs)("div",{id:"schedules",children:[Object(j.jsx)(te,{schedule:n,swapFunc:p}),Object(j.jsx)(ne,{schedule:n,swapFunc:p}),Object(j.jsx)(ae,{schedule:n})]}),Object(j.jsxs)("button",{id:"writeScheduleButt",className:"row centerAll",onClick:function(){u(!0),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(a,c){x(e,t,JSON.stringify(n),{Accept:"application/json","Content-Type":"application/json"}).then(function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=10;break}return e.t0=c,e.t1=alert,e.next=5,t.json();case 5:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3),e.next=20;break;case 10:return n=t.headers.get("Content-Type"),r=/.+filename="([^"]+)"/g.exec(t.headers.get("Content-Disposition"))[1],e.t4=g,e.t5=n,e.next=16,t.text();case 16:e.t6=e.sent,e.t7=r,(0,e.t4)(e.t5,e.t6,e.t7),a();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}("/writeSchedule",a.POST,{data:n}).finally((function(){return u(!1)}))},children:[f.Edit,Object(j.jsx)("p",{children:"write schedule"})]})]})]})]})};n(23),n(24),n(25);var re=function(){var e,t=r.a.useState(!0),n=Object(h.a)(t,2),c=n[0],s=n[1],o=r.a.useState(!1),i=Object(h.a)(o,2),p=i[0],m=i[1],b={},x=Object(u.a)(w);try{for(x.s();!(e=x.n()).done;){b[e.value.name]=[]}}catch(k){x.e(k)}finally{x.f()}var O=r.a.useState(b),g=Object(h.a)(O,2),y=g[0],C=g[1];function N(e){return T.apply(this,arguments)}function T(){return T=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v("/get".concat(t.endpoint),a.GET).then((function(e){return e.data})).catch((function(e){return console.log("res",e),alert(e.error),[]})));case 1:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function A(){return S.apply(this,arguments)}function S(){return S=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,Promise.all(w.map((function(e){return N(e).then((function(n){t[e.name]=n}))})));case 3:C(t);case 4:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}return r.a.useEffect((function(){A()}),[]),r.a.useEffect((function(){var e,t=!0,n=Object(u.a)(w);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(a.mandatory&&!a.isLoaded(y)){t=!1;break}}}catch(k){n.e(k)}finally{n.f()}m(t)}),[y]),Object(j.jsxs)("div",{children:[Object(j.jsxs)("header",{children:[Object(j.jsxs)("div",{id:"banner",className:"row",children:[Object(j.jsx)("div",{id:"calendarContainer",className:"centerAll",children:f.Calendar}),Object(j.jsx)("div",{id:"titleContainer",className:"spacer centerCross",children:Object(j.jsx)("h1",{id:"",children:"Interview Scheduling Tool"})})]}),Object(j.jsxs)("div",{id:"navButtons",className:"centerAll",children:[Object(j.jsx)("button",{className:c?"selected":"",onClick:function(){return s(!0)},children:"Configuration"}),Object(j.jsx)("button",{className:c?"":"selected",disabled:!p,title:p?"":"mandatory tables not uploaded",onClick:function(){return s(!1)},children:"Schedule"})]})]}),Object(j.jsx)("div",{children:c?Object(j.jsx)(G,{tableData:y,updateTableData:A}):Object(j.jsx)(ce,{})})]})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};o.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(re,{})}),document.getElementById("root")),se()}},[[26,1,2]]]);
//# sourceMappingURL=main.0a258516.chunk.js.map